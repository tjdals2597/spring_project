<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="shopadmin">

	<select id="search" parameterType="Map" resultType="admindao">
		select * from admin_member
		<choose>
			<when test="part==1">
				where amid = #{amid}
			</when>
			<when test="part==2">
				where amid = #{amid} and ampass = #{ampass}
			</when>
			<otherwise>
				where amcheck = '2' order by amidx desc
			</otherwise>
		</choose>
	</select>

	<insert id="signup_insert">
		insert into admin_member (amidx, amcheck, amid, ampass, amname, amemail, amphone, amdepartment, amposition, amloginck, amindate) 
		values ('0', '2', #{amid}, #{ampass}, #{amname}, #{amemail}, #{amphone}, #{amdepartment}, #{amposition}, 'N', now())
	</insert>
	
	<update id="admin_loginck">
		update admin_member set 
		<if test='ck=="Y"'>
			amloginck = 'Y' 
		</if>
		<if test='ck=="N"'>
			amloginck = 'N' 
		</if>
		where amidx = #{amidx}
	</update>

</mapper>